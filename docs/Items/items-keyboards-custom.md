# \[Keyboard\] Custom Keyboard
> Hướng dẫn thay đổi cấu hình với bàn phím Keychron

## Trang Web

- [Keychron Offical](https://launcher.keychron.com/#/keymap)
- [VIA/](https://usevia.app/)

## Fix issue

### ❌ __HID device connected__

Trên hệ điều hành Linux sẽ gặp vấn đề này. Nó là do hệ điều hành không cho phép ứng dụng sử dụng qua application. Lúc này phải tự thêm địa chỉ thiết bị bằng tay.

Làm theo hướng dẫn ở [trong link này](https://github.com/earthphum/LinuxDocuments/blob/main/Arch/fixed/keychron-fix.md)

1. Chạy lệnh này để cho phép người dùng của bạn truy cập vào các thiết bị đầu vào:
    ```bash
    sudo usermod -aG input $USER
    ```
2. Tạo quy tắc udev mới
    ```bash
    sudo nano /etc/udev/rules.d/99-keychron.rules
    ```
3. Tìm id Sản phẩm của bạn
    - Chạy lệnh sau để tìm kiếm thông tin sản phẩm
        ```bash
        lsusb | grep Keychron
        ```
    - Đọc các thông số về `idVendor` và `idProduct`. Ví dụ:
        ```text
        Bus 001 Device 002: ID 3434:0253 Keychron Keychron K5 Pro
        ```
        - idVendor = `3434`
        - idProduct = `d030`
4. Thêm quy tắc udev
    ```text
    KERNEL=="hidraw*", SUBSYSTEM=="hidraw", ATTRS{idVendor}=="3434", ATTRS{idProduct}=="0253", MODE="0660", GROUP="dtdat", TAG+="uaccess", TAG+="udev-acl"
    ```
    - Có ba trường phải thay đổi là `idVendor`, `idProduct` và `myusername` là tên người dùng.
5. Chạy lại udev rules
    ```bash
    sudo udevadm control --reload-rules
    sudo udevadm trigger
    ```
6. <mark>Nếu vẫn không chạy thì chạy thử lại lệnh sau;</mark>
    ```text
    KERNEL=="hidraw*", SUBSYSTEM=="hidraw", ATTRS{idVendor}=="3434", ATTRS{idProduct}=="0253", MODE="0666", TAG+="uaccess", TAG+="udev-acl"
    ```
    _Nhớ thay `idVendor`, `idProduct` và `myusername`_

## Keychron K5 Pro

### Layout Config Json

```text title="Keymap-K5 Pro White-18-10-41.json"
{"id":875823699,"keymap":[[{"col":0,"row":0,"val":41},{"col":1,"row":0,"val":190},{"col":2,"row":0,"val":189},{"col":3,"row":0,"val":32516},{"col":4,"row":0,"val":32517},{"col":5,"row":0,"val":30723},{"col":6,"row":0,"val":30724},{"col":7,"row":0,"val":172},{"col":8,"row":0,"val":174},{"col":9,"row":0,"val":171},{"col":10,"row":0,"val":168},{"col":11,"row":0,"val":170},{"col":12,"row":0,"val":169},{"col":13,"row":0,"val":0},{"col":14,"row":0,"val":32520},{"col":15,"row":0,"val":32522},{"col":16,"row":0,"val":30725},{"col":17,"row":0,"val":104},{"col":18,"row":0,"val":105},{"col":19,"row":0,"val":106},{"col":20,"row":0,"val":107},{"col":0,"row":1,"val":53},{"col":1,"row":1,"val":30},{"col":2,"row":1,"val":31},{"col":3,"row":1,"val":32},{"col":4,"row":1,"val":33},{"col":5,"row":1,"val":34},{"col":6,"row":1,"val":35},{"col":7,"row":1,"val":36},{"col":8,"row":1,"val":37},{"col":9,"row":1,"val":38},{"col":10,"row":1,"val":39},{"col":11,"row":1,"val":45},{"col":12,"row":1,"val":46},{"col":13,"row":1,"val":42},{"col":14,"row":1,"val":73},{"col":15,"row":1,"val":74},{"col":16,"row":1,"val":75},{"col":17,"row":1,"val":83},{"col":18,"row":1,"val":84},{"col":19,"row":1,"val":85},{"col":20,"row":1,"val":86},{"col":0,"row":2,"val":43},{"col":1,"row":2,"val":20},{"col":2,"row":2,"val":26},{"col":3,"row":2,"val":8},{"col":4,"row":2,"val":21},{"col":5,"row":2,"val":23},{"col":6,"row":2,"val":28},{"col":7,"row":2,"val":24},{"col":8,"row":2,"val":12},{"col":9,"row":2,"val":18},{"col":10,"row":2,"val":19},{"col":11,"row":2,"val":47},{"col":12,"row":2,"val":48},{"col":13,"row":2,"val":49},{"col":14,"row":2,"val":76},{"col":15,"row":2,"val":77},{"col":16,"row":2,"val":78},{"col":17,"row":2,"val":95},{"col":18,"row":2,"val":96},{"col":19,"row":2,"val":97},{"col":20,"row":2,"val":87},{"col":0,"row":3,"val":57},{"col":1,"row":3,"val":4},{"col":2,"row":3,"val":22},{"col":3,"row":3,"val":7},{"col":4,"row":3,"val":9},{"col":5,"row":3,"val":10},{"col":6,"row":3,"val":11},{"col":7,"row":3,"val":13},{"col":8,"row":3,"val":14},{"col":9,"row":3,"val":15},{"col":10,"row":3,"val":51},{"col":11,"row":3,"val":52},{"col":12,"row":3,"val":0},{"col":13,"row":3,"val":40},{"col":14,"row":3,"val":0},{"col":15,"row":3,"val":0},{"col":16,"row":3,"val":0},{"col":17,"row":3,"val":92},{"col":18,"row":3,"val":93},{"col":19,"row":3,"val":94},{"col":20,"row":3,"val":0},{"col":0,"row":4,"val":225},{"col":1,"row":4,"val":0},{"col":2,"row":4,"val":29},{"col":3,"row":4,"val":27},{"col":4,"row":4,"val":6},{"col":5,"row":4,"val":25},{"col":6,"row":4,"val":5},{"col":7,"row":4,"val":17},{"col":8,"row":4,"val":16},{"col":9,"row":4,"val":54},{"col":10,"row":4,"val":55},{"col":11,"row":4,"val":56},{"col":12,"row":4,"val":0},{"col":13,"row":4,"val":229},{"col":14,"row":4,"val":0},{"col":15,"row":4,"val":82},{"col":16,"row":4,"val":0},{"col":17,"row":4,"val":89},{"col":18,"row":4,"val":90},{"col":19,"row":4,"val":91},{"col":20,"row":4,"val":88},{"col":0,"row":5,"val":224},{"col":1,"row":5,"val":32512},{"col":2,"row":5,"val":32514},{"col":3,"row":5,"val":0},{"col":4,"row":5,"val":0},{"col":5,"row":5,"val":0},{"col":6,"row":5,"val":44},{"col":7,"row":5,"val":0},{"col":8,"row":5,"val":0},{"col":9,"row":5,"val":0},{"col":10,"row":5,"val":32515},{"col":11,"row":5,"val":32513},{"col":12,"row":5,"val":21025},{"col":13,"row":5,"val":228},{"col":14,"row":5,"val":80},{"col":15,"row":5,"val":81},{"col":16,"row":5,"val":79},{"col":17,"row":5,"val":98},{"col":18,"row":5,"val":0},{"col":19,"row":5,"val":99},{"col":20,"row":5,"val":0}],[{"col":0,"row":0,"val":1},{"col":1,"row":0,"val":58},{"col":2,"row":0,"val":59},{"col":3,"row":0,"val":60},{"col":4,"row":0,"val":61},{"col":5,"row":0,"val":62},{"col":6,"row":0,"val":63},{"col":7,"row":0,"val":64},{"col":8,"row":0,"val":65},{"col":9,"row":0,"val":66},{"col":10,"row":0,"val":67},{"col":11,"row":0,"val":68},{"col":12,"row":0,"val":69},{"col":13,"row":0,"val":0},{"col":14,"row":0,"val":1},{"col":15,"row":0,"val":1},{"col":16,"row":0,"val":30722},{"col":17,"row":0,"val":1},{"col":18,"row":0,"val":1},{"col":19,"row":0,"val":1},{"col":20,"row":0,"val":1},{"col":0,"row":1,"val":1},{"col":1,"row":1,"val":32523},{"col":2,"row":1,"val":32524},{"col":3,"row":1,"val":32525},{"col":4,"row":1,"val":1},{"col":5,"row":1,"val":1},{"col":6,"row":1,"val":1},{"col":7,"row":1,"val":1},{"col":8,"row":1,"val":1},{"col":9,"row":1,"val":1},{"col":10,"row":1,"val":1},{"col":11,"row":1,"val":1},{"col":12,"row":1,"val":1},{"col":13,"row":1,"val":1},{"col":14,"row":1,"val":1},{"col":15,"row":1,"val":1},{"col":16,"row":1,"val":1},{"col":17,"row":1,"val":1},{"col":18,"row":1,"val":1},{"col":19,"row":1,"val":1},{"col":20,"row":1,"val":1},{"col":0,"row":2,"val":30722},{"col":1,"row":2,"val":30725},{"col":2,"row":2,"val":30724},{"col":3,"row":2,"val":1},{"col":4,"row":2,"val":1},{"col":5,"row":2,"val":1},{"col":6,"row":2,"val":1},{"col":7,"row":2,"val":1},{"col":8,"row":2,"val":1},{"col":9,"row":2,"val":1},{"col":10,"row":2,"val":1},{"col":11,"row":2,"val":1},{"col":12,"row":2,"val":1},{"col":13,"row":2,"val":1},{"col":14,"row":2,"val":1},{"col":15,"row":2,"val":1},{"col":16,"row":2,"val":1},{"col":17,"row":2,"val":1},{"col":18,"row":2,"val":1},{"col":19,"row":2,"val":1},{"col":20,"row":2,"val":1},{"col":0,"row":3,"val":1},{"col":1,"row":3,"val":1},{"col":2,"row":3,"val":30723},{"col":3,"row":3,"val":1},{"col":4,"row":3,"val":1},{"col":5,"row":3,"val":1},{"col":6,"row":3,"val":1},{"col":7,"row":3,"val":1},{"col":8,"row":3,"val":1},{"col":9,"row":3,"val":1},{"col":10,"row":3,"val":1},{"col":11,"row":3,"val":1},{"col":12,"row":3,"val":0},{"col":13,"row":3,"val":1},{"col":14,"row":3,"val":0},{"col":15,"row":3,"val":0},{"col":16,"row":3,"val":0},{"col":17,"row":3,"val":1},{"col":18,"row":3,"val":1},{"col":19,"row":3,"val":1},{"col":20,"row":3,"val":0},{"col":0,"row":4,"val":1},{"col":1,"row":4,"val":0},{"col":2,"row":4,"val":1},{"col":3,"row":4,"val":1},{"col":4,"row":4,"val":1},{"col":5,"row":4,"val":1},{"col":6,"row":4,"val":32526},{"col":7,"row":4,"val":28691},{"col":8,"row":4,"val":1},{"col":9,"row":4,"val":1},{"col":10,"row":4,"val":1},{"col":11,"row":4,"val":1},{"col":12,"row":4,"val":0},{"col":13,"row":4,"val":1},{"col":14,"row":4,"val":0},{"col":15,"row":4,"val":1},{"col":16,"row":4,"val":0},{"col":17,"row":4,"val":1},{"col":18,"row":4,"val":1},{"col":19,"row":4,"val":1},{"col":20,"row":4,"val":1},{"col":0,"row":5,"val":1},{"col":1,"row":5,"val":1},{"col":2,"row":5,"val":1},{"col":3,"row":5,"val":0},{"col":4,"row":5,"val":0},{"col":5,"row":5,"val":0},{"col":6,"row":5,"val":1},{"col":7,"row":5,"val":0},{"col":8,"row":5,"val":0},{"col":9,"row":5,"val":0},{"col":10,"row":5,"val":1},{"col":11,"row":5,"val":1},{"col":12,"row":5,"val":1},{"col":13,"row":5,"val":1},{"col":14,"row":5,"val":1},{"col":15,"row":5,"val":1},{"col":16,"row":5,"val":1},{"col":17,"row":5,"val":1},{"col":18,"row":5,"val":0},{"col":19,"row":5,"val":1},{"col":20,"row":5,"val":0}],[{"col":0,"row":0,"val":41},{"col":1,"row":0,"val":58},{"col":2,"row":0,"val":59},{"col":3,"row":0,"val":60},{"col":4,"row":0,"val":61},{"col":5,"row":0,"val":62},{"col":6,"row":0,"val":63},{"col":7,"row":0,"val":64},{"col":8,"row":0,"val":65},{"col":9,"row":0,"val":66},{"col":10,"row":0,"val":67},{"col":11,"row":0,"val":68},{"col":12,"row":0,"val":69},{"col":13,"row":0,"val":0},{"col":14,"row":0,"val":70},{"col":15,"row":0,"val":32521},{"col":16,"row":0,"val":30725},{"col":17,"row":0,"val":179},{"col":18,"row":0,"val":178},{"col":19,"row":0,"val":30466},{"col":20,"row":0,"val":2063},{"col":0,"row":1,"val":53},{"col":1,"row":1,"val":30},{"col":2,"row":1,"val":31},{"col":3,"row":1,"val":32},{"col":4,"row":1,"val":33},{"col":5,"row":1,"val":34},{"col":6,"row":1,"val":35},{"col":7,"row":1,"val":36},{"col":8,"row":1,"val":37},{"col":9,"row":1,"val":38},{"col":10,"row":1,"val":39},{"col":11,"row":1,"val":45},{"col":12,"row":1,"val":46},{"col":13,"row":1,"val":42},{"col":14,"row":1,"val":73},{"col":15,"row":1,"val":74},{"col":16,"row":1,"val":75},{"col":17,"row":1,"val":83},{"col":18,"row":1,"val":84},{"col":19,"row":1,"val":85},{"col":20,"row":1,"val":86},{"col":0,"row":2,"val":43},{"col":1,"row":2,"val":20},{"col":2,"row":2,"val":26},{"col":3,"row":2,"val":8},{"col":4,"row":2,"val":21},{"col":5,"row":2,"val":23},{"col":6,"row":2,"val":28},{"col":7,"row":2,"val":24},{"col":8,"row":2,"val":12},{"col":9,"row":2,"val":18},{"col":10,"row":2,"val":19},{"col":11,"row":2,"val":47},{"col":12,"row":2,"val":48},{"col":13,"row":2,"val":49},{"col":14,"row":2,"val":76},{"col":15,"row":2,"val":77},{"col":16,"row":2,"val":78},{"col":17,"row":2,"val":95},{"col":18,"row":2,"val":96},{"col":19,"row":2,"val":97},{"col":20,"row":2,"val":87},{"col":0,"row":3,"val":57},{"col":1,"row":3,"val":4},{"col":2,"row":3,"val":22},{"col":3,"row":3,"val":7},{"col":4,"row":3,"val":9},{"col":5,"row":3,"val":10},{"col":6,"row":3,"val":11},{"col":7,"row":3,"val":13},{"col":8,"row":3,"val":14},{"col":9,"row":3,"val":15},{"col":10,"row":3,"val":51},{"col":11,"row":3,"val":52},{"col":12,"row":3,"val":0},{"col":13,"row":3,"val":40},{"col":14,"row":3,"val":0},{"col":15,"row":3,"val":0},{"col":16,"row":3,"val":0},{"col":17,"row":3,"val":92},{"col":18,"row":3,"val":93},{"col":19,"row":3,"val":94},{"col":20,"row":3,"val":0},{"col":0,"row":4,"val":225},{"col":1,"row":4,"val":0},{"col":2,"row":4,"val":29},{"col":3,"row":4,"val":27},{"col":4,"row":4,"val":6},{"col":5,"row":4,"val":25},{"col":6,"row":4,"val":5},{"col":7,"row":4,"val":17},{"col":8,"row":4,"val":16},{"col":9,"row":4,"val":54},{"col":10,"row":4,"val":55},{"col":11,"row":4,"val":56},{"col":12,"row":4,"val":0},{"col":13,"row":4,"val":229},{"col":14,"row":4,"val":0},{"col":15,"row":4,"val":82},{"col":16,"row":4,"val":0},{"col":17,"row":4,"val":89},{"col":18,"row":4,"val":90},{"col":19,"row":4,"val":91},{"col":20,"row":4,"val":88},{"col":0,"row":5,"val":224},{"col":1,"row":5,"val":32514},{"col":2,"row":5,"val":226},{"col":3,"row":5,"val":0},{"col":4,"row":5,"val":0},{"col":5,"row":5,"val":0},{"col":6,"row":5,"val":44},{"col":7,"row":5,"val":0},{"col":8,"row":5,"val":0},{"col":9,"row":5,"val":0},{"col":10,"row":5,"val":230},{"col":11,"row":5,"val":32515},{"col":12,"row":5,"val":21027},{"col":13,"row":5,"val":228},{"col":14,"row":5,"val":80},{"col":15,"row":5,"val":81},{"col":16,"row":5,"val":79},{"col":17,"row":5,"val":98},{"col":18,"row":5,"val":0},{"col":19,"row":5,"val":99},{"col":20,"row":5,"val":0}],[{"col":0,"row":0,"val":1},{"col":1,"row":0,"val":190},{"col":2,"row":0,"val":189},{"col":3,"row":0,"val":180},{"col":4,"row":0,"val":32519},{"col":5,"row":0,"val":30723},{"col":6,"row":0,"val":30724},{"col":7,"row":0,"val":172},{"col":8,"row":0,"val":174},{"col":9,"row":0,"val":171},{"col":10,"row":0,"val":168},{"col":11,"row":0,"val":170},{"col":12,"row":0,"val":169},{"col":13,"row":0,"val":0},{"col":14,"row":0,"val":1},{"col":15,"row":0,"val":1},{"col":16,"row":0,"val":30722},{"col":17,"row":0,"val":1},{"col":18,"row":0,"val":1},{"col":19,"row":0,"val":1},{"col":20,"row":0,"val":1},{"col":0,"row":1,"val":1},{"col":1,"row":1,"val":1},{"col":2,"row":1,"val":1},{"col":3,"row":1,"val":1},{"col":4,"row":1,"val":1},{"col":5,"row":1,"val":1},{"col":6,"row":1,"val":1},{"col":7,"row":1,"val":1},{"col":8,"row":1,"val":1},{"col":9,"row":1,"val":1},{"col":10,"row":1,"val":1},{"col":11,"row":1,"val":1},{"col":12,"row":1,"val":1},{"col":13,"row":1,"val":1},{"col":14,"row":1,"val":1},{"col":15,"row":1,"val":1},{"col":16,"row":1,"val":1},{"col":17,"row":1,"val":1},{"col":18,"row":1,"val":1},{"col":19,"row":1,"val":1},{"col":20,"row":1,"val":1},{"col":0,"row":2,"val":30722},{"col":1,"row":2,"val":209},{"col":2,"row":2,"val":205},{"col":3,"row":2,"val":210},{"col":4,"row":2,"val":1},{"col":5,"row":2,"val":1},{"col":6,"row":2,"val":1},{"col":7,"row":2,"val":1},{"col":8,"row":2,"val":1},{"col":9,"row":2,"val":1},{"col":10,"row":2,"val":1},{"col":11,"row":2,"val":1},{"col":12,"row":2,"val":1},{"col":13,"row":2,"val":1},{"col":14,"row":2,"val":1},{"col":15,"row":2,"val":1},{"col":16,"row":2,"val":1},{"col":17,"row":2,"val":1},{"col":18,"row":2,"val":1},{"col":19,"row":2,"val":1},{"col":20,"row":2,"val":1},{"col":0,"row":3,"val":1},{"col":1,"row":3,"val":207},{"col":2,"row":3,"val":206},{"col":3,"row":3,"val":208},{"col":4,"row":3,"val":1},{"col":5,"row":3,"val":1},{"col":6,"row":3,"val":1},{"col":7,"row":3,"val":1},{"col":8,"row":3,"val":1},{"col":9,"row":3,"val":1},{"col":10,"row":3,"val":1},{"col":11,"row":3,"val":1},{"col":12,"row":3,"val":0},{"col":13,"row":3,"val":1},{"col":14,"row":3,"val":0},{"col":15,"row":3,"val":0},{"col":16,"row":3,"val":0},{"col":17,"row":3,"val":1},{"col":18,"row":3,"val":1},{"col":19,"row":3,"val":1},{"col":20,"row":3,"val":0},{"col":0,"row":4,"val":1},{"col":1,"row":4,"val":0},{"col":2,"row":4,"val":219},{"col":3,"row":4,"val":220},{"col":4,"row":4,"val":218},{"col":5,"row":4,"val":217},{"col":6,"row":4,"val":32526},{"col":7,"row":4,"val":28691},{"col":8,"row":4,"val":1},{"col":9,"row":4,"val":1},{"col":10,"row":4,"val":1},{"col":11,"row":4,"val":1},{"col":12,"row":4,"val":0},{"col":13,"row":4,"val":1},{"col":14,"row":4,"val":0},{"col":15,"row":4,"val":1},{"col":16,"row":4,"val":0},{"col":17,"row":4,"val":1},{"col":18,"row":4,"val":1},{"col":19,"row":4,"val":1},{"col":20,"row":4,"val":1},{"col":0,"row":5,"val":1},{"col":1,"row":5,"val":1},{"col":2,"row":5,"val":1},{"col":3,"row":5,"val":0},{"col":4,"row":5,"val":0},{"col":5,"row":5,"val":0},{"col":6,"row":5,"val":1},{"col":7,"row":5,"val":0},{"col":8,"row":5,"val":0},{"col":9,"row":5,"val":0},{"col":10,"row":5,"val":1},{"col":11,"row":5,"val":1},{"col":12,"row":5,"val":1},{"col":13,"row":5,"val":1},{"col":14,"row":5,"val":1},{"col":15,"row":5,"val":1},{"col":16,"row":5,"val":1},{"col":17,"row":5,"val":1},{"col":18,"row":5,"val":0},{"col":19,"row":5,"val":1},{"col":20,"row":5,"val":0}]],"version":"1.0.0","MD5":"ad74435e9a10f6e9c564c9409f9421ac"}
```